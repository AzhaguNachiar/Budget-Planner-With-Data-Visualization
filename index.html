<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Budget Planner with Data Visualizations</title>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
  body {
    font-family: "Segoe UI", Roboto, sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
  }
  .container {
    background: #fff;
    margin-top: 40px;
    padding: 25px 30px;
    border-radius: 10px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    width: 90%;
    max-width: 700px;
  }
  h1 { text-align: center; color: #0b6cff; margin-bottom: 25px; }
  form {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }
  input, select, button {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 1rem;
  }
  input, select { flex: 1; min-width: 120px; }
  button {
    background: #0b6cff;
    color: #fff;
    cursor: pointer;
    border: none;
    transition: 0.3s;
  }
  button:hover { background: #0848b3; }
  .summary {
    text-align: center;
    margin-top: 20px;
    font-weight: 600;
  }
  .charts {
    margin-top: 25px;
  }
  canvas { margin-top: 20px; }
</style>
</head>
<body>
<div class="container">
  <h1>ðŸ’° Budget Planner</h1>

  <form id="txForm">
    <input type="text" id="desc" placeholder="Description" required />
    <input type="number" id="amount" placeholder="Amount (â‚¹)" required />
    <select id="type">
      <option value="income">Income</option>
      <option value="expense">Expense</option>
    </select>
    <button type="submit">Add</button>
  </form>

  <div class="summary">
    <p>Total Income: â‚¹<span id="incTotal">0</span></p>
    <p>Total Expense: â‚¹<span id="expTotal">0</span></p>
    <p>Balance: â‚¹<span id="balance">0</span></p>
  </div>

  <div class="charts">
    <canvas id="pieChart" height="300"></canvas>
    <canvas id="barChart" height="250"></canvas>
  </div>
</div>

<script>
const form = document.getElementById("txForm");
const desc = document.getElementById("desc");
const amount = document.getElementById("amount");
const type = document.getElementById("type");
const incTotal = document.getElementById("incTotal");
const expTotal = document.getElementById("expTotal");
const balance = document.getElementById("balance");

let transactions = [];
let pieChart, barChart;

form.addEventListener("submit", e => {
  e.preventDefault();
  const tx = {
    desc: desc.value.trim(),
    amount: Number(amount.value),
    type: type.value
  };
  if (!tx.desc || tx.amount <= 0) return;
  transactions.push(tx);
  desc.value = "";
  amount.value = "";
  updateSummary();
  drawCharts();
});

function updateSummary() {
  const income = transactions
    .filter(t => t.type === "income")
    .reduce((a,b) => a + b.amount, 0);
  const expense = transactions
    .filter(t => t.type === "expense")
    .reduce((a,b) => a + b.amount, 0);
  incTotal.textContent = income;
  expTotal.textContent = expense;
  balance.textContent = income - expense;
}

function drawCharts() {
  const income = transactions
    .filter(t => t.type === "income")
    .reduce((a,b) => a + b.amount, 0);
  const expense = transactions
    .filter(t => t.type === "expense")
    .reduce((a,b) => a + b.amount, 0);

  const ctxPie = document.getElementById("pieChart").getContext("2d");
  const ctxBar = document.getElementById("barChart").getContext("2d");

  if (pieChart) pieChart.destroy();
  if (barChart) barChart.destroy();

  pieChart = new Chart(ctxPie, {
    type: "pie",
    data: {
      labels: ["Income", "Expense"],
      datasets: [{
        data: [income, expense],
        backgroundColor: ["#4caf50", "#f44336"]
      }]
    }
  });

  barChart = new Chart(ctxBar, {
    type: "bar",
    data: {
      labels: ["Income", "Expense"],
      datasets: [{
        label: "Amount (â‚¹)",
        data: [income, expense],
        backgroundColor: ["#81c784", "#ef9a9a"]
      }]
    },
    options: { scales: { y: { beginAtZero: true } } }
  });
}
</script>
</body>
</html>
